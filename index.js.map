{"version":3,"file":"index.js","sources":["../src/js/utils/constants.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/handlers/form.js","../src/main.js"],"sourcesContent":["export const refs = {\n  formEl: document.querySelector('.form'),\n  galleryEl: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n};\n","const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '?key=49168840-e3c83c6477977e837e7a2b39b';\n\nexport function fetchFotoCard(query) {\n  const searchParams = new URLSearchParams({\n    q: query.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}${API_KEY}&${searchParams}`).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n\n    return res.json();\n  });\n}\n","export function createMarkupGalleryCards(cards) {\n  return cards\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n    <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <ul class=\"gallery-list\">\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Likes</p>\n                    <p class=\"gallery-info-value\">${likes}</p>\n                </li>\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Views</p>\n                    <p class=\"gallery-info-value\">${views}</p>\n                </li>\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Comments</p>\n                    <p class=\"gallery-info-value\">${comments}</p>\n                </li>\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Downloads</p>\n                    <p class=\"gallery-info-value\">${downloads}</p>\n                </li>\n            </ul>\n        </a>\n    </li>\n        `\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport { fetchFotoCard } from '../pixabay-api';\nimport { refs } from '../utils/constants';\nimport { createMarkupGalleryCards } from '../render-functions';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport function handlerSearch(ev) {\n  ev.preventDefault();\n\n  const form = ev.currentTarget;\n  const userQuery = form.elements.user_query.value.trim();\n\n  if (userQuery === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Please enter a query!',\n      position: 'topRight',\n    });\n\n    return;\n  }\n  refs.loaderEl.classList.add('active');\n\n  return fetchFotoCard(userQuery)\n    .then(data => {\n      refs.loaderEl.classList.remove('active');\n      if (!data.total) {\n        refs.galleryEl.innerHTML = '';\n\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return [];\n      }\n\n      refs.galleryEl.innerHTML = createMarkupGalleryCards(data.hits);\n      lightbox.refresh();\n    })\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => {\n      form.reset();\n    });\n}\n","import { refs } from './js/utils/constants';\nimport { handlerSearch } from './js/handlers/form';\n\nrefs.formEl.addEventListener('submit', handlerSearch);\n"],"names":["refs","BASE_URL","API_KEY","fetchFotoCard","query","searchParams","res","createMarkupGalleryCards","cards","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","handlerSearch","ev","form","userQuery","iziToast","data","err"],"mappings":"6vBAAO,MAAMA,EAAO,CAClB,OAAQ,SAAS,cAAc,OAAO,EACtC,UAAW,SAAS,cAAc,UAAU,EAC5C,SAAU,SAAS,cAAc,SAAS,CAC5C,ECJMC,EAAW,2BACXC,EAAU,0CAET,SAASC,EAAcC,EAAO,CACnC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,EAAGD,EAAM,KAAM,EACf,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGH,CAAQ,GAAGC,CAAO,IAAIG,CAAY,EAAE,EAAE,KAAKC,GAAO,CAChE,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAG5B,OAAOA,EAAI,MACf,CAAG,CACH,CClBO,SAASC,EAAyBC,EAAO,CAC9C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,wCAEgCL,CAAa;AAAA,4CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,oDAIlBC,CAAK;AAAA;AAAA;AAAA;AAAA,oDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,oDAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,oDAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAMxD,EACA,KAAK,EAAE,CACZ,CCjCA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAI,CAChCA,EAAG,eAAc,EAEjB,MAAMC,EAAOD,EAAG,cACVE,EAAYD,EAAK,SAAS,WAAW,MAAM,OAEjD,GAAIC,IAAc,GAAI,CACpBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,wBACT,SAAU,UAChB,CAAK,EAED,MACD,CACD,OAAAtB,EAAK,SAAS,UAAU,IAAI,QAAQ,EAE7BG,EAAckB,CAAS,EAC3B,KAAKE,GAAQ,CAEZ,GADAvB,EAAK,SAAS,UAAU,OAAO,QAAQ,EACnC,CAACuB,EAAK,MACR,OAAAvB,EAAK,UAAU,UAAY,GAE3BsB,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UACpB,CAAS,EACM,GAGTtB,EAAK,UAAU,UAAYO,EAAyBgB,EAAK,IAAI,EAC7DP,EAAS,QAAO,CACtB,CAAK,EACA,MAAMQ,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACrB,CAAK,EACA,QAAQ,IAAM,CACbJ,EAAK,MAAK,CAChB,CAAK,CACL,CCjDApB,EAAK,OAAO,iBAAiB,SAAUkB,CAAa"}